<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi·∫øn Sƒ© Kh√°ng Chi·∫øn - T∆∞ T∆∞·ªüng H·ªì Ch√≠ Minh</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(45deg, #2c3e50, #34495e, #27ae60);
            background-size: 400% 400%;
            animation: battlefieldMove 15s ease infinite;
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        @keyframes battlefieldMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.3) 100%);
        }
        .hud {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: none;
            gap: 12px;
        }
        .stat-panel {
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            border: 2px solid #e74c3c;
            backdrop-filter: blur(10px);
            pointer-events: auto;
        }
        .health-bar, .spirit-bar {
            width: 200px;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            margin: 5px 0;
            overflow: hidden;
            border: 1px solid #fff;
        }
        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            transition: width 0.3s ease;
            border-radius: 10px;
        }
        .spirit-fill {
            height: 100%;
            background: linear-gradient(90deg, #f1c40f, #f39c12);
            transition: width 0.3s ease;
            border-radius: 10px;
        }
        .battlefield {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 20% 20%, rgba(46, 125, 50, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(139, 69, 19, 0.3) 0%, transparent 50%);
        }
        .player {
            position: absolute;
            width: 50px;
            height: 50px;
            font-size: 40px;
            transition: none;
            z-index: 100;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.3));
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .enemy {
            position: absolute;
            width: 40px;
            height: 40px;
            font-size: 35px;
            z-index: 50;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            filter: drop-shadow(0 0 8px rgba(255,0,0,0.5));
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .bullet {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #ffff00, #ff6b00);
            border-radius: 50%;
            z-index: 75;
            box-shadow: 0 0 10px #ffff00;
        }
        .enemy-bullet {
            position: absolute;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #ff0000, #8b0000);
            border-radius: 50%;
            z-index: 75;
            box-shadow: 0 0 8px #ff0000;
        }
        .explosion {
            position: absolute;
            font-size: 60px;
            z-index: 200;
            animation: explode 0.5s ease-out forwards;
            pointer-events: none;
        }
        @keyframes explode {
            0% { transform: scale(0.1); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }
        .question-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            color: white;
            padding: 30px;
            border-radius: 20px;
            border: 3px solid #e74c3c;
            z-index: 2000;
            max-width: 800px;
            width: 90%;
            backdrop-filter: blur(15px);
        }
        .question-text {
            font-size: 1.2em;
            margin-bottom: 20px;
            text-align: center;
            color: #ecf0f1;
            line-height: 1.4;
        }
        .difficulty-indicator {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.1em;
            font-weight: bold;
        }
        .difficulty-easy { color: #2ecc71; }
        .difficulty-medium { color: #f39c12; }
        .difficulty-hard { color: #e74c3c; }
        .difficulty-expert { color: #9b59b6; }
        .answer-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .answer-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 0.95em;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.3;
        }
        .answer-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4); }
        .answer-btn.correct { background: linear-gradient(45deg, #27ae60, #2ecc71); }
        .answer-btn.incorrect { background: linear-gradient(45deg, #e74c3c, #c0392b); }
        .instructions {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
            pointer-events: none;
        }
        .wave-indicator {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em; color: #e74c3c; font-weight: bold;
            z-index: 1500; text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
            animation: waveAnnounce 2s ease-out forwards;
            pointer-events: none;
        }
        @keyframes waveAnnounce {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
        }
        .game-over-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center;
            z-index: 3000; backdrop-filter: blur(15px);
        }
        .game-over-content {
            text-align: center; color: white; background: rgba(231, 76, 60, 0.2);
            padding: 40px; border-radius: 20px; border: 3px solid #e74c3c;
        }
        .restart-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white; border: none; padding: 15px 30px; border-radius: 25px;
            font-size: 1.1em; cursor: pointer; margin-top: 20px; transition: all 0.3s ease;
        }
        .explanation { margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; display: none; }
        #toggle-sound { pointer-events: auto; cursor: pointer; padding: 8px 14px; border-radius: 10px; border: 1px solid #fff; background: #2ecc71; color: #fff; }
        #volume { pointer-events: auto; cursor: pointer; }
        .timer-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            margin-top: 10px;
            overflow: hidden;
        }
        .timer-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #f39c12);
            transition: width 0.1s linear;
            border-radius: 4px;
        }
    </style>
</head>
<body>
<div class="game-container">
    <div class="hud">
        <div class="stat-panel">
            <div>üáªüá≥ Chi·∫øn Sƒ© Kh√°ng Chi·∫øn</div>
            <div class="health-bar"><div class="health-fill" id="health-bar"></div></div>
            <div>M√°u: <span id="health-text">100</span></div>
        </div>

        <div style="text-align: center; color: white; font-size: 1.5em; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">
            <div>üèÜ ƒêi·ªÉm: <span id="score">0</span></div>
            <div>‚ö° L√†n: <span id="wave">1</span></div>
            <div>üéØ ƒê·ªô kh√≥: <span id="difficulty-level">D·ªÖ</span></div>
        </div>

        <div class="stat-panel">
            <div>üí™ Tinh Th·∫ßn C√°ch M·∫°ng</div>
            <div class="spirit-bar"><div class="spirit-fill" id="spirit-bar"></div></div>
            <div>NƒÉng l∆∞·ª£ng: <span id="spirit-text">100</span></div>
        </div>

        <div class="stat-panel" style="display:flex;align-items:center;gap:10px;">
            <button id="toggle-sound">üîä Enable Sound</button>
            <div style="color:#fff;">Vol</div>
            <input id="volume" type="range" min="0" max="1" step="0.01" value="0.6">
        </div>
    </div>

    <div class="battlefield" id="battlefield">
        <div class="player" id="player">ü™ñ</div>
    </div>

    <div class="instructions">
        <strong>ƒêi·ªÅu khi·ªÉn:</strong><br>
        ‚å®Ô∏è WASD ho·∫∑c ‚Üê‚Üí‚Üë‚Üì: Di chuy·ªÉn<br>
        üñ±Ô∏è Click chu·ªôt: B·∫Øn ƒë·∫°n<br>
        üí° Tr·∫£ l·ªùi ƒë√∫ng c√¢u h·ªèi ƒë·ªÉ ƒë∆∞·ª£c buff!<br>
        ‚è∞ C√¢u h·ªèi c√≥ gi·ªõi h·∫°n th·ªùi gian!
    </div>

    <div class="question-popup" id="question-popup" style="display: none;">
        <div class="difficulty-indicator" id="difficulty-indicator"></div>
        <div class="question-text" id="question-text"></div>
        <div class="timer-bar">
            <div class="timer-fill" id="timer-fill"></div>
        </div>
        <div class="answer-options" id="answer-options"></div>
        <div class="explanation" id="explanation"></div>
    </div>

    <div class="game-over-screen" id="game-over">
        <div class="game-over-content">
            <h1>üáªüá≥ K·∫øt Th√∫c Nhi·ªám V·ª•! üáªüá≥</h1>
            <div style="font-size: 1.5em; margin: 20px 0;">
                ƒêi·ªÉm cu·ªëi: <span id="final-score">0</span><br>
                L√†n ƒë·∫°t ƒë∆∞·ª£c: <span id="final-wave">1</span><br>
                ƒê·ªô kh√≥ cao nh·∫•t: <span id="final-difficulty">D·ªÖ</span>
            </div>
            <p>B·∫°n ƒë√£ chi·∫øn ƒë·∫•u d≈©ng c·∫£m v√¨ t∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh!</p>
            <button class="restart-btn" onclick="restartGame()">üîÑ Chi·∫øn ƒê·∫•u L·∫°i</button>
        </div>
    </div>
</div>

<script>
/* ====================== Sound Manager (Web Audio API) ====================== */
class SoundManager {
  constructor() {
    this.ctx = null;
    this.master = null;
    this.enabled = false;
    this.volume = 0.6;
    this._bgmTimer = null;
  }
  init() {
    if (this.enabled) return;
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    if (!AudioContext) return;
    this.ctx = new AudioContext();
    this.master = this.ctx.createGain();
    this.master.gain.value = this.volume;
    this.master.connect(this.ctx.destination);
    this.enabled = true;
    if (this.ctx.state === "suspended") this.ctx.resume();
  }
  setVolume(v) {
    this.volume = v;
    if (this.master) this.master.gain.value = v;
  }
  _tone({ freq=440, type="square", dur=0.08, attack=0.002, decay=0.06, vol=0.8 }) {
    if (!this.enabled) return;
    const t0 = this.ctx.currentTime;
    const osc = this.ctx.createOscillator();
    const gain = this.ctx.createGain();
    osc.type = type;
    osc.frequency.setValueAtTime(freq, t0);
    gain.gain.setValueAtTime(0, t0);
    gain.gain.linearRampToValueAtTime(vol, t0 + attack);
    gain.gain.exponentialRampToValueAtTime(0.0001, t0 + attack + decay);
    osc.connect(gain).connect(this.master);
    osc.start(t0);
    osc.stop(t0 + attack + decay + 0.02);
  }
  _noise({ dur=0.25, vol=0.5, lp=1200 }) {
    if (!this.enabled) return;
    const t0 = this.ctx.currentTime;
    const bufferSize = Math.floor(this.ctx.sampleRate * dur);
    const buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate);
    const data = buffer.getChannelData(0);
    for (let i = 0; i < bufferSize; i++) data[i] = (Math.random() * 2 - 1) * 0.9;
    const src = this.ctx.createBufferSource();
    src.buffer = buffer;
    const filter = this.ctx.createBiquadFilter();
    filter.type = "lowpass";
    filter.frequency.value = lp;
    const gain = this.ctx.createGain();
    gain.gain.setValueAtTime(vol, t0);
    gain.gain.exponentialRampToValueAtTime(0.0001, t0 + dur);
    src.connect(filter).connect(gain).connect(this.master);
    src.start(t0);
    src.stop(t0 + dur + 0.02);
  }
  shoot() {
    this._tone({ freq: 900, dur: 0.05, type: "square", vol: 0.5 });
    setTimeout(() => this._tone({ freq: 1500, dur: 0.04, type: "square", vol: 0.4 }), 30);
  }
  explosion() {
    this._noise({ dur: 0.22, vol: 0.6, lp: 1400 });
    setTimeout(() => this._tone({ freq: 80, type: "sine", dur: 0.2, attack: 0.005, decay: 0.22, vol: 0.5 }), 10);
  }
  popup() { this._tone({ freq: 600, dur: 0.06, type: "triangle", vol: 0.35 }); }
  correct() {
    [880, 1175, 1480].forEach((f, i) => setTimeout(() => this._tone({ freq: f, type: "sine", dur: 0.08, vol: 0.5 }), i * 90));
  }
  incorrect() {
    [300, 220, 160].forEach((f, i) => setTimeout(() => this._tone({ freq: f, type: "sawtooth", dur: 0.09, vol: 0.5 }), i * 70));
  }
  timeout() {
    [400, 350, 300, 250].forEach((f, i) => setTimeout(() => this._tone({ freq: f, type: "triangle", dur: 0.1, vol: 0.4 }), i * 100));
  }
  gameover() {
    [440, 330, 220, 150].forEach((f, i) => setTimeout(() => this._tone({ freq: f, type: "triangle", dur: 0.18, vol: 0.6 }), i * 160));
  }
  startBGM() {
    if (!this.enabled || this._bgmTimer) return;
    const pattern = [523, 587, 659, 523, 523, 587, 659, 698];
    let idx = 0;
    this._bgmTimer = setInterval(() => {
      this._tone({ freq: pattern[idx % pattern.length], type: "sine", dur: 0.12, vol: 0.25 });
      idx++;
    }, 320);
  }
  stopBGM() {
    if (this._bgmTimer) { clearInterval(this._bgmTimer); this._bgmTimer = null; }
  }
}
const SND = new SoundManager();

// Game variables
let player = { x: 400, y: 500, health: 100, spirit: 100 };
let enemies = [];
let bullets = [];
let enemyBullets = [];
let score = 0;
let wave = 1;
let gameRunning = true;
let questionActive = false;
let keys = {};
let lastEnemySpawn = 0;
let currentQuestionIndex = 0;
let questionTimer = null;
let questionTimeLeft = 0;
let currentDifficulty = 'easy';
let maxDifficultyReached = 'easy';

// Enhanced Questions based on the script provided
const questions = {
  easy: [
    {
      question: "Theo H·ªì Ch√≠ Minh, nh√† n∆∞·ªõc ta l√† n∆∞·ªõc g√¨?",
      answers: ["N∆∞·ªõc d√¢n ch·ªß v√¨ d√¢n", "N∆∞·ªõc phong ki·∫øn c≈©", "N∆∞·ªõc t∆∞ b·∫£n ch·ªß nghƒ©a", "N∆∞·ªõc qu√¢n ch·ªß l·∫≠p hi·∫øn"],
      correct: 0,
      explanation: "H·ªì Ch√≠ Minh kh·∫≥ng ƒë·ªãnh: 'N∆∞·ªõc ta l√† n∆∞·ªõc d√¢n ch·ªß, bao nhi√™u l·ª£i √≠ch ƒë·ªÅu v√¨ d√¢n, bao nhi√™u quy·ªÅn h·∫°n ƒë·ªÅu c·ªßa d√¢n.'",
      timeLimit: 15
    },
    {
      question: "Quy·ªÅn h√†nh v√† l·ª±c l∆∞·ª£ng ƒë·ªÅu ·ªü ƒë√¢u theo t∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh?",
      answers: ["·ªû n∆°i d√¢n ch√∫ng", "·ªû n∆°i ch√≠nh ph·ªß", "·ªû n∆°i qu√¢n ƒë·ªôi", "·ªû n∆°i c√°c quan l·∫°i"],
      correct: 0,
      explanation: "B√°c H·ªì kh·∫≥ng ƒë·ªãnh: 'Quy·ªÅn h√†nh v√† l·ª±c l∆∞·ª£ng ƒë·ªÅu ·ªü n∆°i d√¢n.'",
      timeLimit: 12
    },
    {
      question: "H·ªì Ch√≠ Minh n√≥i: 'Vi·ªác g√¨ c√≥ l·ª£i cho d√¢n, ta ph·∫£i...'?",
      answers: ["H·∫øt s·ª©c l√†m ngay", "C√¢n nh·∫Øc k·ªπ l∆∞·ª°ng", "B√°o c√°o c·∫•p tr√™n", "Th·∫£o lu·∫≠n t·∫≠p th·ªÉ"],
      correct: 0,
      explanation: "'Vi·ªác g√¨ c√≥ l·ª£i cho d√¢n, ta ph·∫£i h·∫øt s·ª©c l√†m. Vi·ªác g√¨ c√≥ h·∫°i cho d√¢n, ta ph·∫£i h·∫øt s·ª©c tr√°nh.'",
      timeLimit: 12
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, c√°n b·ªô l√† g√¨ c·ªßa nh√¢n d√¢n?",
      answers: ["L√† c√¥ng b·ªôc trung th√†nh", "L√† ng∆∞·ªùi l√£nh ƒë·∫°o", "L√† quan c√°ch m·∫°ng", "L√† th·∫ßy d·∫°y h·ªçc"],
      correct: 0,
      explanation: "H·ªì Ch√≠ Minh nhi·ªÅu l·∫ßn nh·∫•n m·∫°nh c√°n b·ªô, ƒë·∫£ng vi√™n ph·∫£i l√† ƒë·∫ßy t·ªõ trung th√†nh c·ªßa nh√¢n d√¢n.",
      timeLimit: 15
    },
    {
      question: "D√¢n ch·ªß l√† ƒë·ªÉ l√†m g√¨ theo H·ªì Ch√≠ Minh?",
      answers: ["ƒê·ªÉ d√¢n ƒë∆∞·ª£c n√≥i √Ω ki·∫øn", "ƒê·ªÉ tƒÉng quy·ªÅn l·ª±c", "ƒê·ªÉ ki·ªÉm so√°t d√¢n", "ƒê·ªÉ t·∫°o tr·∫≠t t·ª±"],
      correct: 0,
      explanation: "'D√¢n ch·ªß l√† ƒë·ªÉ l√†m sao cho d√¢n ƒë∆∞·ª£c m·ªü mi·ªáng ra, ƒë∆∞·ª£c n√≥i, ƒë∆∞·ª£c b√†y t·ªè √Ω ki·∫øn c·ªßa m√¨nh.'",
      timeLimit: 12
    },
    {
      question: "H·ªì Ch√≠ Minh y√™u c·∫ßu c√°n b·ªô ph·∫£i c√≥ ph·∫©m ch·∫•t g√¨?",
      answers: ["C·∫ßn, ki·ªám, li√™m, ch√≠nh", "Gi√†u c√≥, quy·ªÅn l·ª±c", "Th√¥ng minh, lanh l·ª£i", "Nhanh nh·∫πn, kh√©o l√©o"],
      correct: 0,
      explanation: "H·ªì Ch√≠ Minh y√™u c·∫ßu m·ªçi c√°n b·ªô, ƒë·∫£ng vi√™n ph·∫£i c·∫ßn, ki·ªám, li√™m, ch√≠nh, ch√≠ c√¥ng v√¥ t∆∞.",
      timeLimit: 15
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, nh√¢n d√¢n c√≥ quy·ªÅn g√¨ v·ªõi ƒë·∫°i bi·ªÉu kh√¥ng x·ª©ng ƒë√°ng?",
      answers: ["C√≥ quy·ªÅn b√£i mi·ªÖn h·ªç", "Ph·∫£i ch·ªù h·∫øt nhi·ªám k·ª≥", "Kh√¥ng ƒë∆∞·ª£c l√†m g√¨", "Ch·ªâ ƒë∆∞·ª£c khuy√™n nh·ªß"],
      correct: 0,
      explanation: "N·∫øu nh·ªØng ƒë·∫°i bi·ªÉu ƒë∆∞·ª£c nh√¢n d√¢n l·ª±a ch·ªçn kh√¥ng c√≤n x·ª©ng ƒë√°ng, nh√¢n d√¢n c√≥ quy·ªÅn b√£i mi·ªÖn.",
      timeLimit: 18
    },
    {
      question: "H·ªì Ch√≠ Minh v√≠ tham nh≈©ng nh∆∞ g√¨?",
      answers: ["Nh∆∞ gi·∫∑c n·ªôi x√¢m", "Nh∆∞ b·ªánh th∆∞·ªùng th·∫•y", "Nh∆∞ khuy·∫øt ƒëi·ªÉm nh·ªè", "Nh∆∞ sai l·∫ßm b√¨nh th∆∞·ªùng"],
      correct: 0,
      explanation: "Ng∆∞·ªùi v√≠ tham nh≈©ng, quan li√™u nh∆∞ 'gi·∫∑c n·ªôi x√¢m', nguy hi·ªÉm kh√¥ng k√©m gi·∫∑c ngo·∫°i x√¢m.",
      timeLimit: 15
    }
  ],
  medium: [
    {
      question: "H·ªì Ch√≠ Minh coi ƒê·∫£ng v·ª´a l√† ng∆∞·ªùi l√£nh ƒë·∫°o, v·ª´a l√† g√¨?",
      answers: ["Ng∆∞·ªùi ƒë·∫ßy t·ªõ trung th√†nh c·ªßa d√¢n", "Ng∆∞·ªùi gi√°m s√°t x√£ h·ªôi", "Ng∆∞·ªùi ra quy·∫øt ƒë·ªãnh cu·ªëi c√πng", "Ng∆∞·ªùi ƒëi·ªÅu h√†nh b·ªô m√°y"],
      correct: 0,
      explanation: "H·ªì Ch√≠ Minh coi ƒê·∫£ng l√† 'ng∆∞·ªùi l√£nh ƒë·∫°o, ƒë·ªìng th·ªùi l√† ng∆∞·ªùi ƒë·∫ßy t·ªõ trung th√†nh c·ªßa nh√¢n d√¢n'.",
      timeLimit: 20
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, v≈© kh√≠ s·∫Øc b√©n ƒë·ªÉ x√¢y d·ª±ng ƒê·∫£ng l√† g√¨?",
      answers: ["T·ª± ph√™ b√¨nh v√† ph√™ b√¨nh", "K·ª∑ lu·∫≠t nghi√™m minh", "H·ªçc t·∫≠p kh√¥ng ng·ª´ng", "ƒêo√†n k·∫øt n·ªôi b·ªô"],
      correct: 0,
      explanation: "H·ªì Ch√≠ Minh coi t·ª± ph√™ b√¨nh v√† ph√™ b√¨nh l√† 'v≈© kh√≠ s·∫Øc b√©n' ƒë·ªÉ x√¢y d·ª±ng ƒê·∫£ng.",
      timeLimit: 22
    },
    {
      question: "Ch·ªß nghƒ©a c√° nh√¢n ƒë∆∞·ª£c H·ªì Ch√≠ Minh g·ªçi l√† g√¨?",
      answers: ["Gi·∫∑c n·ªôi x√¢m nguy hi·ªÉm", "T∆∞ t∆∞·ªüng l·∫°c h·∫≠u", "Quan ƒëi·ªÉm sai l·∫ßm", "Th√≥i quen x·∫•u"],
      correct: 0,
      explanation: "Ch·ªß nghƒ©a c√° nh√¢n l√† 'gi·∫∑c n·ªôi x√¢m', l√† nguy√™n nh√¢n c·ªßa tham nh≈©ng, quan li√™u.",
      timeLimit: 18
    },
    {
      question: "H·ªì Ch√≠ Minh y√™u c·∫ßu ch·ªçn c√°n b·ªô nh∆∞ th·∫ø n√†o?",
      answers: ["C√≥ ƒë·ª©c, c√≥ t√†i, v·ª´a h·ªìng v·ª´a chuy√™n", "Ch·ªâ c·∫ßn c√≥ t√†i nƒÉng cao", "Ch·ªâ c·∫ßn trung th√†nh v·ªõi ƒê·∫£ng", "Ch·ªâ c·∫ßn c√≥ kinh nghi·ªám l√¢u nƒÉm"],
      correct: 0,
      explanation: "H·ªì Ch√≠ Minh y√™u c·∫ßu ch·ªçn ng∆∞·ªùi c√≥ ƒë·ª©c, c√≥ t√†i, v·ª´a 'h·ªìng' v·ª´a 'chuy√™n'.",
      timeLimit: 25
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, c√°n b·ªô l√† g·ªëc c·ªßa ƒëi·ªÅu g√¨?",
      answers: ["G·ªëc c·ªßa m·ªçi c√¥ng vi·ªác", "G·ªëc c·ªßa s·ª± ph√°t tri·ªÉn", "G·ªëc c·ªßa ni·ªÅm tin", "G·ªëc c·ªßa quy·ªÅn l·ª±c"],
      correct: 0,
      explanation: "'C√°n b·ªô l√† g·ªëc c·ªßa m·ªçi c√¥ng vi·ªác' - quan ƒëi·ªÉm quan tr·ªçng c·ªßa H·ªì Ch√≠ Minh.",
      timeLimit: 20
    },
    {
      question: "Nh√† n∆∞·ªõc ph√°p quy·ªÅn XHCN qu·∫£n l√Ω x√£ h·ªôi b·∫±ng g√¨?",
      answers: ["Qu·∫£n l√Ω b·∫±ng ph√°p lu·∫≠t", "Qu·∫£n l√Ω b·∫±ng m·ªánh l·ªánh", "Qu·∫£n l√Ω b·∫±ng truy·ªÅn th·ªëng", "Qu·∫£n l√Ω b·∫±ng kinh nghi·ªám"],
      correct: 0,
      explanation: "Nh√† n∆∞·ªõc ph√°p quy·ªÅn XHCN l√† nh√† n∆∞·ªõc qu·∫£n l√Ω x√£ h·ªôi b·∫±ng ph√°p lu·∫≠t.",
      timeLimit: 22
    },
    {
      question: "H·ªì Ch√≠ Minh n√≥i n·∫øu ƒë·ªÉ h·ªèng c√°n b·ªô s·∫Ω l√†m h·ªèng g√¨?",
      answers: ["H·ªèng c√¥ng vi·ªác v√† c·∫£ ch·∫ø ƒë·ªô", "Ch·ªâ h·ªèng c√¥ng vi·ªác hi·ªán t·∫°i", "Ch·ªâ h·ªèng uy t√≠n c√° nh√¢n", "Ch·ªâ h·ªèng m·ªôt b·ªô ph·∫≠n nh·ªè"],
      correct: 0,
            explanation: "'N·∫øu ƒë·ªÉ h·ªèng c√°n b·ªô th√¨ s·∫Ω l√†m h·ªèng c√¥ng vi·ªác v√† h·ªèng c·∫£ ch·∫ø ƒë·ªô.' - l·ªùi c·∫£nh b√°o c·ªßa B√°c H·ªì.",
      timeLimit: 25
    },
    {
      question: "Ph√°p lu·∫≠t ph·∫£i ph·∫£n √°nh ƒëi·ªÅu g√¨ theo t∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh?",
      answers: ["√ù ch√≠, l·ª£i √≠ch c·ªßa nh√¢n d√¢n", "√ù ch√≠ c·ªßa nh√† l√£nh ƒë·∫°o", "Truy·ªÅn th·ªëng d√¢n t·ªôc", "Xu h∆∞·ªõng th·∫ø gi·ªõi"],
      correct: 0,
      explanation: "Ph√°p lu·∫≠t ph·∫£i ph·∫£n √°nh √Ω ch√≠, l·ª£i √≠ch c·ªßa nh√¢n d√¢n.",
      timeLimit: 20
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, quy·ªÅn l·ª±c nh√† n∆∞·ªõc ph·∫£i ƒë∆∞·ª£c nh∆∞ th·∫ø n√†o?",
      answers: ["Ph√¢n c√¥ng, ph·ªëi h·ª£p v√† ki·ªÉm so√°t", "T·∫≠p trung tuy·ªát ƒë·ªëi", "Ph√¢n t√°n ho√†n to√†n", "ƒê·ªÉ t·ª± nhi√™n v·∫≠n h√†nh"],
      correct: 0,
      explanation: "Quy·ªÅn l·ª±c ph·∫£i ƒë∆∞·ª£c ph√¢n c√¥ng, ph·ªëi h·ª£p v√† ki·ªÉm so√°t ch·∫∑t ch·∫Ω.",
      timeLimit: 22
    },
    {
      question: "Nh√† n∆∞·ªõc ph·∫£i t√¥n tr·ªçng v√† b·∫£o ƒë·∫£m ƒëi·ªÅu g√¨?",
      answers: ["Quy·ªÅn con ng∆∞·ªùi, quy·ªÅn c√¥ng d√¢n", "Quy·ªÅn l·ª£i c·ªßa t·∫≠p th·ªÉ", "Quy·ªÅn c·ªßa c∆° quan nh√† n∆∞·ªõc", "Quy·ªÅn c·ªßa ng∆∞·ªùi l√£nh ƒë·∫°o"],
      correct: 0,
      explanation: "Nh√† n∆∞·ªõc ph·∫£i t√¥n tr·ªçng, b·∫£o v·ªá v√† b·∫£o ƒë·∫£m quy·ªÅn con ng∆∞·ªùi, quy·ªÅn c√¥ng d√¢n.",
      timeLimit: 20
    }
  ],
  hard: [
    {
      question: "Theo H·ªì Ch√≠ Minh, m·ªôt d√¢n t·ªôc, m·ªôt ƒê·∫£ng s·∫Ω m·∫•t s·ª©c h·∫•p d·∫´n n·∫øu ƒëi·ªÅu g√¨?",
      answers: ["N·∫øu l√≤ng d·∫° kh√¥ng trong s√°ng n·ªØa", "N·∫øu thi·∫øu t√†i nƒÉng", "N·∫øu kh√¥ng c√≥ quy·ªÅn l·ª±c", "N·∫øu kh√¥ng ƒë∆∞·ª£c ·ªßng h·ªô"],
      correct: 0,
      explanation: "'...n·∫øu l√≤ng d·∫° kh√¥ng trong s√°ng n·ªØa, n·∫øu sa v√†o ch·ªß nghƒ©a c√° nh√¢n' - l·ªùi c·∫£nh b√°o s√¢u s·∫Øc c·ªßa B√°c H·ªì.",
      timeLimit: 30
    },
    {
      question: "H·ªì Ch√≠ Minh y√™u c·∫ßu ki√™n quy·∫øt ch·ªëng c√°c cƒÉn b·ªánh n√†o?",
      answers: ["Quan li√™u, tham √¥, l√£ng ph√≠", "C√° nh√¢n ch·ªß nghƒ©a ƒë∆°n thu·∫ßn", "Thi·∫øu k·ª∑ lu·∫≠t t·ªï ch·ª©c", "Kh√¥ng h·ªçc h·ªèi ti·∫øn b·ªô"],
      correct: 0,
      explanation: "H·ªì Ch√≠ Minh y√™u c·∫ßu ki√™n quy·∫øt ch·ªëng c√°c cƒÉn b·ªánh: quan li√™u, tham √¥, l√£ng ph√≠.",
      timeLimit: 28
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, b·ªô m√°y nh√† n∆∞·ªõc ph·∫£i ƒë∆∞·ª£c x√¢y d·ª±ng nh∆∞ th·∫ø n√†o?",
      answers: ["G·ªçn nh·∫π, hi·ªáu qu·∫£, g·∫ßn d√¢n", "To l·ªõn, uy quy·ªÅn, m·∫°nh m·∫Ω", "Ph·ª©c t·∫°p, chuy√™n nghi·ªáp", "ƒê∆°n gi·∫£n, d·ªÖ qu·∫£n l√Ω"],
      correct: 0,
      explanation: "X√¢y d·ª±ng b·ªô m√°y g·ªçn nh·∫π, hi·ªáu qu·∫£, g·∫ßn g≈©i v·ªõi nh√¢n d√¢n.",
      timeLimit: 25
    },
    {
      question: "H·ªì Ch√≠ Minh nh·∫•n m·∫°nh c√°n b·ªô ph·∫£i c√≥ th√°i ƒë·ªô g√¨ v·ªõi nh√¢n d√¢n?",
      answers: ["G·∫ßn d√¢n, hi·ªÉu d√¢n, h·ªçc d√¢n", "D·∫°y d√¢n, d·∫´n d·∫Øt d√¢n", "Qu·∫£n l√Ω d√¢n, ki·ªÉm so√°t d√¢n", "B·∫£o v·ªá d√¢n, che ch·ªü d√¢n"],
      correct: 0,
      explanation: "Ng∆∞·ªùi y√™u c·∫ßu c√°n b·ªô ph·∫£i g·∫ßn d√¢n, hi·ªÉu d√¢n, t√¥n tr·ªçng d√¢n v√† ph·ª•c v·ª• nh√¢n d√¢n t·∫≠n t·ª•y.",
      timeLimit: 25
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, ngu·ªìn g·ªëc quy·ªÅn l·ª±c nh√† n∆∞·ªõc t·ª´ ƒë√¢u m√† ra?",
      answers: ["T·ª´ nh√¢n d√¢n m√† ra", "T·ª´ hi·∫øn ph√°p quy ƒë·ªãnh", "T·ª´ truy·ªÅn th·ªëng l·ªãch s·ª≠", "T·ª´ s·ª± ·ªßy quy·ªÅn qu·ªëc t·∫ø"],
      correct: 0,
      explanation: "Kh·∫≥ng ƒë·ªãnh ngu·ªìn g·ªëc quy·ªÅn l·ª±c nh√† n∆∞·ªõc l√† t·ª´ nh√¢n d√¢n m√† ra.",
      timeLimit: 28
    },
    {
      question: "H·ªì Ch√≠ Minh coi vi·ªác x√¢y d·ª±ng Nh√† n∆∞·ªõc trong s·∫°ch, v·ªØng m·∫°nh l√† g√¨?",
      answers: ["Y·∫øu t·ªë s·ªëng c√≤n c·ªßa ch·∫ø ƒë·ªô", "Nhi·ªám v·ª• quan tr·ªçng", "M·ª•c ti√™u l√¢u d√†i", "∆Ø·ªõc m∆° cao ƒë·∫πp"],
      correct: 0,
      explanation: "H·ªì Ch√≠ Minh lu√¥n coi vi·ªác x√¢y d·ª±ng m·ªôt Nh√† n∆∞·ªõc trong s·∫°ch, v·ªØng m·∫°nh l√† y·∫øu t·ªë s·ªëng c√≤n c·ªßa ch·∫ø ƒë·ªô.",
      timeLimit: 30
    },
    {
      question: "Trong s·∫°ch c√≥ nghƒ©a l√† kh√¥ng c√≥ nh·ªØng g√¨ theo H·ªì Ch√≠ Minh?",
      answers: ["Kh√¥ng tham nh≈©ng, ƒë·∫∑c quy·ªÅn, xa d√¢n", "Ch·ªâ kh√¥ng tham nh≈©ng", "Ch·ªâ kh√¥ng c√≥ ƒë·∫∑c quy·ªÅn", "Ch·ªâ kh√¥ng xa r·ªùi nh√¢n d√¢n"],
      correct: 0,
      explanation: "Trong s·∫°ch c√≥ nghƒ©a l√† kh√¥ng tham nh≈©ng, kh√¥ng ƒë·∫∑c quy·ªÅn ƒë·∫∑c l·ª£i, kh√¥ng xa r·ªùi nh√¢n d√¢n.",
      timeLimit: 28
    },
    {
      question: "H·ªì Ch√≠ Minh y√™u c·∫ßu t·ª± ph√™ b√¨nh v√† ph√™ b√¨nh ph·∫£i nh∆∞ th·∫ø n√†o?",
      answers: ["Nghi√™m t√∫c, ch√¢n th√†nh, c·∫ßu th·ªã", "Nh·∫π nh√†ng, t·∫ø nh·ªã", "M·∫°nh m·∫Ω, quy·∫øt li·ªát", "Linh ho·∫°t, kh√©o l√©o"],
      correct: 0,
      explanation: "Ph·∫£i ti·∫øn h√†nh nghi√™m t√∫c, ch√¢n th√†nh, c·∫ßu th·ªã, tr√°nh h√¨nh th·ª©c.",
      timeLimit: 25
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, c√°n b·ªô, ƒë·∫£ng vi√™n ph·∫£i ƒë·∫∑t g√¨ l√™n tr√™n h·∫øt?",
      answers: ["L·ª£i √≠ch nh√¢n d√¢n, ƒë·∫•t n∆∞·ªõc", "L·ª£i √≠ch c√° nh√¢n ch√≠nh ƒë√°ng", "L·ª£i √≠ch t·∫≠p th·ªÉ c∆° quan", "L·ª£i √≠ch gia ƒë√¨nh"],
      correct: 0,
      explanation: "C√°n b·ªô, ƒë·∫£ng vi√™n ph·∫£i ƒë·∫∑t l·ª£i √≠ch c·ªßa nh√¢n d√¢n, c·ªßa ƒë·∫•t n∆∞·ªõc l√™n tr√™n h·∫øt.",
      timeLimit: 25
    },
    {
      question: "H·ªì Ch√≠ Minh nh·∫•n m·∫°nh ph·∫£i ngƒÉn ch·∫∑n t√¨nh tr·∫°ng g√¨ trong b·ªô m√°y?",
      answers: ["L·∫°m quy·ªÅn, l·ª£i √≠ch nh√≥m", "Thi·∫øu chuy√™n m√¥n", "Kh√¥ng ƒëo√†n k·∫øt", "L√†m vi·ªác ch·∫≠m ch·∫°p"],
      correct: 0,
      explanation: "NgƒÉn ch·∫∑n t√¨nh tr·∫°ng l·∫°m quy·ªÅn, l·ª£i √≠ch nh√≥m.",
      timeLimit: 22
    }
  ],
  expert: [
    {
      question: "H·ªì Ch√≠ Minh kh·∫≥ng ƒë·ªãnh b·∫£n ch·∫•t c·ªßa nh√† n∆∞·ªõc d√¢n ch·ªß l√† 'bao nhi√™u l·ª£i √≠ch ƒë·ªÅu v√¨ d√¢n, bao nhi√™u quy·ªÅn h·∫°n ƒë·ªÅu c·ªßa d√¢n'. ƒêi·ªÅu n√†y th·ªÉ hi·ªán nguy√™n t·∫Øc n√†o?",
      answers: ["D√¢n l√† ch·ªß th·ªÉ t·ªëi cao quy·ªÅn l·ª±c", "Nh√† n∆∞·ªõc l√† trung t√¢m quy·ªÅn l·ª±c", "ƒê·∫£ng l√£nh ƒë·∫°o tuy·ªát ƒë·ªëi", "Ch√≠nh ph·ªß ƒëi·ªÅu h√†nh m·ªçi vi·ªác"],
      correct: 0,
      explanation: "Th·ªÉ hi·ªán s√¢u s·∫Øc quan ƒëi·ªÉm d√¢n l√† ch·ªß, d√¢n l√† ch·ªß th·ªÉ t·ªëi cao c·ªßa quy·ªÅn l·ª±c nh√† n∆∞·ªõc.",
      timeLimit: 35
    },
    {
      question: "Theo t∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh, nh√¢n d√¢n th·ª±c hi·ªán quy·ªÅn l·ª±c nh√† n∆∞·ªõc qua h√¨nh th·ª©c n√†o?",
      answers: ["Tr·ª±c ti·∫øp ho·∫∑c gi√°n ti·∫øp qua QH, HƒêND", "Ch·ªâ th√¥ng qua b·∫ßu c·ª≠", "Ch·ªâ th√¥ng qua ƒë·∫°i bi·ªÉu", "Ch·ªâ th√¥ng qua M·∫∑t tr·∫≠n"],
      correct: 0,
      explanation: "Nh√¢n d√¢n tr·ª±c ti·∫øp ho·∫∑c gi√°n ti·∫øp th√¥ng qua Qu·ªëc h·ªôi, H·ªôi ƒë·ªìng nh√¢n d√¢n th·ª±c hi·ªán quy·ªÅn l·ª±c nh√† n∆∞·ªõc.",
      timeLimit: 40
    },
    {
      question: "H·ªì Ch√≠ Minh n√≥i: 'M·ªôt d√¢n t·ªôc, m·ªôt ƒê·∫£ng... kh√¥ng nh·∫•t ƒë·ªãnh h√¥m nay v√† ng√†y mai v·∫´n ƒë∆∞·ª£c m·ªçi ng∆∞·ªùi y√™u m·∫øn n·∫øu...' ƒëi·ªÅu g√¨?",
      answers: ["Sa v√†o ch·ªß nghƒ©a c√° nh√¢n", "Thi·∫øu nƒÉng l·ª±c l√£nh ƒë·∫°o", "Kh√¥ng theo k·ªãp th·ªùi ƒë·∫°i", "M·∫•t ƒëi s·ª©c m·∫°nh qu√¢n s·ª±"],
      correct: 0,
      explanation: "'...n·∫øu l√≤ng d·∫° kh√¥ng trong s√°ng n·ªØa, n·∫øu sa v√†o ch·ªß nghƒ©a c√° nh√¢n' - c·∫£nh b√°o v·ªÅ nguy c∆° t·ª´ b√™n trong.",
      timeLimit: 38
    },
    {
      question: "Trong t∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh v·ªÅ x√¢y d·ª±ng ƒê·∫£ng, nguy√™n t·∫Øc 't·∫≠p trung d√¢n ch·ªß' k·∫øt h·ª£p v·ªõi nh·ªØng nguy√™n t·∫Øc n√†o?",
      answers: ["T·ª± ph√™ b√¨nh v√† g·∫ßn d√¢n, hi·ªÉu d√¢n", "Ch·ªâ t·ª± ph√™ b√¨nh v√† ph√™ b√¨nh", "Ch·ªâ g·∫ßn d√¢n, hi·ªÉu d√¢n, h·ªçc d√¢n", "K·ª∑ lu·∫≠t v√† ƒëo√†n k·∫øt"],
      correct: 0,
      explanation: "T∆∞ t∆∞·ªüng x√¢y d·ª±ng ƒê·∫£ng bao g·ªìm t·∫≠p trung d√¢n ch·ªß, t·ª± ph√™ b√¨nh v√† ph√™ b√¨nh, g·∫ßn d√¢n, hi·ªÉu d√¢n, h·ªçc d√¢n.",
      timeLimit: 40
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, ƒë·∫∑c ƒëi·ªÉm c·ªßa nh√† n∆∞·ªõc ph√°p quy·ªÅn XHCN l√† b·∫£o ƒë·∫£m ƒëi·ªÅu g√¨?",
      answers: ["Quy·ªÅn l·ª±c thu·ªôc v·ªÅ nh√¢n d√¢n", "Ph√°p lu·∫≠t cao nh·∫•t", "Ch√≠nh ph·ªß m·∫°nh m·∫Ω", "Tr·∫≠t t·ª± x√£ h·ªôi"],
      correct: 0,
      explanation: "Nh√† n∆∞·ªõc ph√°p quy·ªÅn XHCN qu·∫£n l√Ω x√£ h·ªôi b·∫±ng ph√°p lu·∫≠t, b·∫£o ƒë·∫£m quy·ªÅn l·ª±c thu·ªôc v·ªÅ nh√¢n d√¢n.",
      timeLimit: 35
    },
    {
      question: "H·ªì Ch√≠ Minh nh·∫•n m·∫°nh ph√≤ng ch·ªëng tham nh≈©ng c√≥ √Ω nghƒ©a g√¨ ƒë·ªëi v·ªõi ch·∫ø ƒë·ªô?",
      answers: ["C·ªßng c·ªë ni·ªÅm tin d√¢n v·ªõi ƒê·∫£ng, Nh√† n∆∞·ªõc", "Ch·ªâ ƒë·ªÉ tr·ª´ng ph·∫°t k·∫ª x·∫•u", "T·∫°o s·ª± s·ª£ h√£i trong c√°n b·ªô", "Th·ªÉ hi·ªán quy·ªÅn l·ª±c ph√°p lu·∫≠t"],
      correct: 0,
      explanation: "Ph√≤ng, ch·ªëng tham nh≈©ng g√≥p ph·∫ßn c·ªßng c·ªë ni·ªÅm tin c·ªßa nh√¢n d√¢n v√†o ƒê·∫£ng v√† Nh√† n∆∞·ªõc.",
      timeLimit: 38
    },
    {
      question: "Trong quan ƒëi·ªÉm c·ªßa H·ªì Ch√≠ Minh, vi·ªác 'x√¢y d·ª±ng ƒë·ªôi ng≈© c√°n b·ªô tr·∫ª, t·∫°o ngu·ªìn k·∫ø c·∫≠n v·ªØng v√†ng' th·ªÉ hi·ªán t∆∞ t∆∞·ªüng g√¨?",
      answers: ["Ph√°t tri·ªÉn b·ªÅn v·ªØng, l√¢u d√†i", "Thay ƒë·ªïi th·∫ø h·ªá l√£nh ƒë·∫°o", "ƒê·ªïi m·ªõi t∆∞ duy qu·∫£n l√Ω", "TƒÉng c∆∞·ªùng s·ª©c tr·∫ª"],
      correct: 0,
      explanation: "Th·ªÉ hi·ªán t·∫ßm nh√¨n ph√°t tri·ªÉn b·ªÅn v·ªØng, ƒë·∫£m b·∫£o s·ª± k·∫ø th·ª´a v√† ph√°t tri·ªÉn l√¢u d√†i c·ªßa c√°ch m·∫°ng.",
      timeLimit: 40
    },
    {
      question: "H·ªì Ch√≠ Minh coi 'd√¢n v·∫≠n' l√† c√¥ng t√°c c√≥ √Ω nghƒ©a nh∆∞ th·∫ø n√†o?",
      answers: ["V·∫≠n ƒë·ªông qu·∫ßn ch√∫ng tham gia c√°ch m·∫°ng", "Gi√°o d·ª•c ch√≠nh tr·ªã cho d√¢n", "Tuy√™n truy·ªÅn ƒë∆∞·ªùng l·ªëi ƒê·∫£ng", "Qu·∫£n l√Ω v√† ƒëi·ªÅu h√†nh d√¢n ch√∫ng"],
      correct: 0,
      explanation: "'D√¢n v·∫≠n' l√† c√¥ng t√°c v·∫≠n ƒë·ªông qu·∫ßn ch√∫ng nh√¢n d√¢n tham gia c√°ch m·∫°ng - n·ªÅn t·∫£ng s·ª©c m·∫°nh c·ªßa ƒê·∫£ng.",
      timeLimit: 35
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, 'c·∫£i c√°ch h√†nh ch√≠nh' c·∫ßn ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u n√†o quan tr·ªçng nh·∫•t?",
      answers: ["B·ªô m√°y tinh g·ªçn, hi·ªáu qu·∫£ ph·ª•c v·ª• d√¢n", "TƒÉng quy·ªÅn l·ª±c cho c∆° quan nh√† n∆∞·ªõc", "Gi·∫£m chi ph√≠ ng√¢n s√°ch", "TƒÉng t·ªëc ƒë·ªô x·ª≠ l√Ω c√¥ng vi·ªác"],
      correct: 0,
      explanation: "B·ªô m√°y nh√† n∆∞·ªõc ph·∫£i tinh g·ªçn, ho·∫°t ƒë·ªông hi·ªáu l·ª±c, hi·ªáu qu·∫£, ph·ª•c v·ª• nh√¢n d√¢n t·ªët nh·∫•t.",
      timeLimit: 38
    },
    {
      question: "Trong t∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh v·ªÅ nh√† n∆∞·ªõc 'c·ªßa d√¢n, do d√¢n, v√¨ d√¢n', y·∫øu t·ªë n√†o ƒë∆∞·ª£c coi l√† c·ªët l√µi nh·∫•t?",
      answers: ["Nh√¢n d√¢n l√† ngu·ªìn g·ªëc m·ªçi quy·ªÅn l·ª±c", "Nh√† n∆∞·ªõc ph·ª•c v·ª• nh√¢n d√¢n", "Nh√¢n d√¢n gi√°m s√°t nh√† n∆∞·ªõc", "Nh√† n∆∞·ªõc b·∫£o v·ªá nh√¢n d√¢n"],
      correct: 0,
      explanation: "C·ªët l√µi l√† kh·∫≥ng ƒë·ªãnh nh√¢n d√¢n l√† ngu·ªìn g·ªëc, ch·ªß th·ªÉ c·ªßa m·ªçi quy·ªÅn l·ª±c nh√† n∆∞·ªõc.",
      timeLimit: 40
    },
    {
      question: "H·ªì Ch√≠ Minh nh·∫•n m·∫°nh 'ki·ªÉm so√°t quy·ªÅn l·ª±c nh√† n∆∞·ªõc' nh·∫±m ngƒÉn ch·∫∑n nguy c∆° n√†o?",
      answers: ["NgƒÉn ch·∫∑n l·∫°m quy·ªÅn v√† l·ª£i √≠ch nh√≥m", "NgƒÉn ch·∫∑n s·ª± y·∫øu k√©m", "NgƒÉn ch·∫∑n thi·∫øu ƒëo√†n k·∫øt", "NgƒÉn ch·∫∑n m·∫•t k·ª∑ lu·∫≠t"],
      correct: 0,
      explanation: "Quy·ªÅn l·ª±c ph·∫£i ƒë∆∞·ª£c ki·ªÉm so√°t ch·∫∑t ch·∫Ω ƒë·ªÉ ngƒÉn ch·∫∑n t√¨nh tr·∫°ng l·∫°m quy·ªÅn, l·ª£i √≠ch nh√≥m.",
      timeLimit: 35
    },
    {
      question: "Theo H·ªì Ch√≠ Minh, √Ω nghƒ©a s√¢u xa c·ªßa vi·ªác 'tƒÉng c∆∞·ªùng s·ª± gi√°m s√°t c·ªßa nh√¢n d√¢n, M·∫∑t tr·∫≠n v√† b√°o ch√≠' l√† g√¨?",
      answers: ["Th·ªÉ hi·ªán b·∫£n ch·∫•t d√¢n ch·ªß th·ª±c s·ª±", "TƒÉng c∆∞·ªùng ki·ªÉm tra k·ª∑ lu·∫≠t", "Ph√°t hi·ªán sai ph·∫°m k·ªãp th·ªùi", "T·∫°o √°p l·ª±c v·ªõi c√°n b·ªô"],
      correct: 0,
      explanation: "Th·ªÉ hi·ªán b·∫£n ch·∫•t d√¢n ch·ªß th·ª±c s·ª± c·ªßa ch·∫ø ƒë·ªô, ƒë·∫£m b·∫£o quy·ªÅn l√†m ch·ªß c·ªßa nh√¢n d√¢n.",
      timeLimit: 40
    }
  ]
};

const enemyTypes = ["üè∞", "‚öîÔ∏è", "üõ°Ô∏è", "üëë", "üè¥‚Äç‚ò†Ô∏è", "‚ö°", "üî•", "üíÄ"];

// Sound UI binding
const btnSound = document.getElementById('toggle-sound');
const volSlider = document.getElementById('volume');

function enableSoundOnce() {
  if (!SND.enabled) {
    SND.init();
    SND.startBGM();
    if (btnSound) {
      btnSound.textContent = 'üîá Mute';
      btnSound.style.background = '#e67e22';
    }
  }
}

if (btnSound) {
  btnSound.addEventListener('click', () => {
    if (!SND.enabled) {
      enableSoundOnce();
    } else {
      if (SND.master.gain.value > 0) {
        SND.setVolume(0);
        btnSound.textContent = 'üîä Unmute';
        btnSound.style.background = '#2ecc71';
      } else {
        const v = parseFloat(volSlider?.value || '0.6');
        SND.setVolume(v);
        btnSound.textContent = 'üîá Mute';
        btnSound.style.background = '#e67e22';
      }
    }
  });
}

if (volSlider) {
  volSlider.addEventListener('input', (e) => {
    const v = parseFloat(e.target.value);
    if (SND.enabled) SND.setVolume(v);
  });
}

['keydown','mousedown','touchstart'].forEach(evt => {
  window.addEventListener(evt, () => enableSoundOnce(), { once: true });
});

// Event listeners
document.addEventListener('keydown', (e) => { keys[e.key.toLowerCase()] = true; });
document.addEventListener('keyup',   (e) => { keys[e.key.toLowerCase()] = false; });
document.addEventListener('click', (e) => {
  if (!questionActive && gameRunning) {
    shootBullet(e.clientX, e.clientY);
    SND.shoot();
  }
});

// Difficulty management
function getCurrentDifficulty() {
  if (wave >= 20) return 'expert';
  if (wave >= 12) return 'hard';
  if (wave >= 6) return 'medium';
  return 'easy';
}

function updateDifficultyDisplay() {
  const difficulty = getCurrentDifficulty();
  const difficultyNames = {
    'easy': 'D·ªÖ',
    'medium': 'Trung b√¨nh', 
    'hard': 'Kh√≥',
    'expert': 'Chuy√™n gia'
  };
  document.getElementById('difficulty-level').textContent = difficultyNames[difficulty];
  
  const difficultyColors = {
    'easy': '#2ecc71',
    'medium': '#f39c12',
    'hard': '#e74c3c', 
    'expert': '#9b59b6'
  };
  document.getElementById('difficulty-level').style.color = difficultyColors[difficulty];
}

// Utility function to shuffle array
function shuffleArray(array) {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
}

// Initialize game
function initGame() {
  player.x = window.innerWidth / 2 - 25;
  player.y = window.innerHeight - 100;
  updatePlayerPosition();
  updateUI();
  updateDifficultyDisplay();
  
  const spawnInterval = Math.max(800, 2000 - (wave * 80));
  setInterval(spawnEnemy, spawnInterval);
  
  gameLoop();
}

function updatePlayerPosition() {
  const playerEl = document.getElementById('player');
  playerEl.style.left = player.x + 'px';
  playerEl.style.top  = player.y + 'px';
}

function updateUI() {
  document.getElementById('health-text').textContent = Math.max(0, player.health);
  document.getElementById('spirit-text').textContent = Math.max(0, player.spirit);
  document.getElementById('score').textContent = score;
  document.getElementById('wave').textContent = wave;
  document.getElementById('health-bar').style.width = Math.max(0, player.health) + '%';
  document.getElementById('spirit-bar').style.width = Math.max(0, player.spirit) + '%';
  updateDifficultyDisplay();
}

function handlePlayerMovement() {
  if (!gameRunning || questionActive) return;
  const speed = 5;
  if (keys['w'] || keys['arrowup'])    player.y = Math.max(0, player.y - speed);
  if (keys['s'] || keys['arrowdown'])  player.y = Math.min(window.innerHeight - 50, player.y + speed);
  if (keys['a'] || keys['arrowleft'])  player.x = Math.max(0, player.x - speed);
  if (keys['d'] || keys['arrowright']) player.x = Math.min(window.innerWidth - 50, player.x + speed);
  updatePlayerPosition();
}

function spawnEnemy() {
  if (!gameRunning || questionActive) return;
  
  const enemyHealth = Math.floor(1 + wave / 5);
  const enemyCount = Math.min(3, Math.floor(wave / 3) + 1);
  
  for (let i = 0; i < enemyCount; i++) {
    const enemy = {
      id: Date.now() + Math.random() + i,
      x: Math.random() * (window.innerWidth - 40),
      y: -40 - (i * 60),
      health: enemyHealth,
      maxHealth: enemyHealth,
      type: enemyTypes[Math.floor(Math.random() * enemyTypes.length)],
      lastShot: 0,
      speed: Math.min(4, 1 + wave * 0.1)
    };
    enemies.push(enemy);
    
    const enemyEl = document.createElement('div');
    enemyEl.className = 'enemy';
    enemyEl.id = 'enemy_' + enemy.id;
    enemyEl.textContent = enemy.type;
    enemyEl.style.left = enemy.x + 'px';
    enemyEl.style.top  = enemy.y + 'px';
    
    if (enemy.health > 1) {
      enemyEl.style.fontSize = (35 + enemy.health * 5) + 'px';
      enemyEl.style.filter = `drop-shadow(0 0 ${8 + enemy.health * 2}px rgba(255,0,0,0.8))`;
    }
    
    document.getElementById('battlefield').appendChild(enemyEl);
  }
}

function updateEnemies() {
  enemies.forEach((enemy, index) => {
    enemy.y += enemy.speed;
    const enemyEl = document.getElementById('enemy_' + enemy.id);
    if (enemyEl) enemyEl.style.top = enemy.y + 'px';

    if (enemy.y > window.innerHeight) {
      removeEnemy(index);
      player.health -= 10;
    }

    const shootChance = Math.min(0.05, 0.01 + wave * 0.002);
    if (Date.now() - enemy.lastShot > (4000 - wave * 100) && Math.random() < shootChance) {
      shootEnemyBullet(enemy.x + 20, enemy.y + 20);
      enemy.lastShot = Date.now();
    }

    if (Math.abs(enemy.x - player.x) < 40 && Math.abs(enemy.y - player.y) < 40) {
      removeEnemy(index);
      player.health -= (20 + enemy.health * 5);
      createExplosion(enemy.x, enemy.y);
    }
  });
}

function shootBullet(targetX, targetY) {
  if (player.spirit < 5) return;
  player.spirit -= 5;
  const dx = targetX - (player.x + 25);
  const dy = targetY - (player.y + 25);
  const distance = Math.sqrt(dx * dx + dy * dy);
  const bullet = {
    id: Date.now() + Math.random(),
    x: player.x + 25,
    y: player.y + 25,
    vx: (dx / distance) * 8,
    vy: (dy / distance) * 8
  };
  bullets.push(bullet);
  const bulletEl = document.createElement('div');
  bulletEl.className = 'bullet';
  bulletEl.id = 'bullet_' + bullet.id;
  bulletEl.style.left = bullet.x + 'px';
  bulletEl.style.top  = bullet.y + 'px';
  document.getElementById('battlefield').appendChild(bulletEl);
}

function shootEnemyBullet(x, y) {
  const dx = player.x - x;
  const dy = player.y - y;
  const distance = Math.sqrt(dx * dx + dy * dy);
  const speed = Math.min(5, 2 + wave * 0.1);
  
  const bullet = {
    id: Date.now() + Math.random(),
    x: x, y: y,
    vx: (dx / distance) * speed,
    vy: (dy / distance) * speed
  };
  enemyBullets.push(bullet);
  const bulletEl = document.createElement('div');
  bulletEl.className = 'enemy-bullet';
  bulletEl.id = 'enemybullet_' + bullet.id;
  bulletEl.style.left = bullet.x + 'px';
  bulletEl.style.top  = bullet.y + 'px';
  document.getElementById('battlefield').appendChild(bulletEl);

  SND._tone({ freq: 400, type: 'square', dur: 0.04, vol: 0.25 });
}

function updateBullets() {
  // Player bullets
  bullets.forEach((bullet, bulletIndex) => {
    bullet.x += bullet.vx;
    bullet.y += bullet.vy;
    const bulletEl = document.getElementById('bullet_' + bullet.id);
    if (bulletEl) {
      bulletEl.style.left = bullet.x + 'px';
      bulletEl.style.top  = bullet.y + 'px';
    }
    enemies.forEach((enemy, enemyIndex) => {
      if (Math.abs(bullet.x - enemy.x - 20) < 20 &&
          Math.abs(bullet.y - enemy.y - 20) < 20) {
        enemy.health--;
        removeBullet(bulletIndex);
        createExplosion(enemy.x, enemy.y);
        
        if (enemy.health <= 0) {
          removeEnemy(enemyIndex);
          score += (10 * Math.max(1, Math.floor(wave / 3)));
          
          const questionChance = Math.min(0.5, 0.2 + wave * 0.015);
          if (Math.random() < questionChance) {
            showQuestion();
          }
          
          if (score > 0 && score % (100 + wave * 50) === 0) {
            wave++;
            showWaveIndicator();
          }
        }
      }
    });
    if (bullet.x < 0 || bullet.x > window.innerWidth ||
        bullet.y < 0 || bullet.y > window.innerHeight) {
      removeBullet(bulletIndex);
    }
  });

  // Enemy bullets
  enemyBullets.forEach((bullet, bulletIndex) => {
    bullet.x += bullet.vx;
    bullet.y += bullet.vy;
    const bulletEl = document.getElementById('enemybullet_' + bullet.id);
    if (bulletEl) {
            bulletEl.style.top  = bullet.y + 'px';
    }
    if (Math.abs(bullet.x - player.x - 25) < 25 &&
        Math.abs(bullet.y - player.y - 25) < 25) {
      removeEnemyBullet(bulletIndex);
      player.health -= (15 + Math.floor(wave / 2));
      createExplosion(player.x, player.y);
    }
    if (bullet.x < 0 || bullet.x > window.innerWidth ||
        bullet.y < 0 || bullet.y > window.innerHeight) {
      removeEnemyBullet(bulletIndex);
    }
  });
}

function showWaveIndicator() {
  const indicator = document.createElement('div');
  indicator.className = 'wave-indicator';
  indicator.textContent = `üåä L√†n ${wave} üåä`;
  document.body.appendChild(indicator);
  setTimeout(() => indicator.remove(), 2000);
}

function removeBullet(index) {
  if (bullets[index]) {
    const bulletEl = document.getElementById('bullet_' + bullets[index].id);
    if (bulletEl) bulletEl.remove();
    bullets.splice(index, 1);
  }
}

function removeEnemyBullet(index) {
  if (enemyBullets[index]) {
    const bulletEl = document.getElementById('enemybullet_' + enemyBullets[index].id);
    if (bulletEl) bulletEl.remove();
    enemyBullets.splice(index, 1);
  }
}

function removeEnemy(index) {
  if (enemies[index]) {
    const enemyEl = document.getElementById('enemy_' + enemies[index].id);
    if (enemyEl) enemyEl.remove();
    enemies.splice(index, 1);
  }
}

function createExplosion(x, y) {
  SND.explosion();
  const explosion = document.createElement('div');
  explosion.className = 'explosion';
  explosion.textContent = 'üí•';
  explosion.style.left = x + 'px';
  explosion.style.top  = y + 'px';
  document.getElementById('battlefield').appendChild(explosion);
  setTimeout(() => { if (explosion.parentNode) explosion.remove(); }, 500);
}

function showQuestion() {
  SND.popup();
  
  const difficulty = getCurrentDifficulty();
  currentDifficulty = difficulty;
  
  const difficultyLevels = ['easy', 'medium', 'hard', 'expert'];
  if (difficultyLevels.indexOf(difficulty) > difficultyLevels.indexOf(maxDifficultyReached)) {
    maxDifficultyReached = difficulty;
  }
  
  const questionPool = questions[difficulty];
  const randomIndex = Math.floor(Math.random() * questionPool.length);
  const question = questionPool[randomIndex];
  
  questionActive = true;
  questionTimeLeft = question.timeLimit;
  
  const difficultyNames = {
    'easy': 'D·ªÑ',
    'medium': 'TRUNG B√åNH',
    'hard': 'KH√ì', 
    'expert': 'CHUY√äN GIA'
  };
  
  const difficultyClasses = {
    'easy': 'difficulty-easy',
    'medium': 'difficulty-medium',
    'hard': 'difficulty-hard',
    'expert': 'difficulty-expert'
  };
  
  const indicator = document.getElementById('difficulty-indicator');
  indicator.textContent = `üéØ ${difficultyNames[difficulty]} üéØ`;
  indicator.className = `difficulty-indicator ${difficultyClasses[difficulty]}`;
  
  document.getElementById('question-text').textContent = question.question;
  
  // Shuffle answers and track correct position
  const answersWithIndex = question.answers.map((answer, index) => ({
    text: answer,
    isCorrect: index === question.correct
  }));
  
  const shuffledAnswers = shuffleArray(answersWithIndex);
  const newCorrectIndex = shuffledAnswers.findIndex(answer => answer.isCorrect);
  
  const optionsContainer = document.getElementById('answer-options');
  optionsContainer.innerHTML = '';
  shuffledAnswers.forEach((answer, index) => {
    const button = document.createElement('button');
    button.className = 'answer-btn';
    button.textContent = answer.text;
    button.onclick = () => selectAnswer(index, { ...question, correct: newCorrectIndex });
    optionsContainer.appendChild(button);
  });
  
  document.getElementById('explanation').style.display = 'none';
  document.getElementById('question-popup').style.display = 'block';
  
  startQuestionTimer({ ...question, correct: newCorrectIndex });
}

function startQuestionTimer(question) {
  const timerFill = document.getElementById('timer-fill');
  timerFill.style.width = '100%';
  
  questionTimer = setInterval(() => {
    questionTimeLeft--;
    const percentage = (questionTimeLeft / question.timeLimit) * 100;
    timerFill.style.width = percentage + '%';
    
    if (questionTimeLeft <= 0) {
      clearInterval(questionTimer);
      timeoutQuestion(question);
    }
  }, 1000);
}

function timeoutQuestion(question) {
  SND.timeout();
  
  const buttons = document.querySelectorAll('.answer-btn');
  buttons.forEach(btn => btn.disabled = true);
  buttons[question.correct].classList.add('correct');
  
  player.health -= 15;
  
  document.getElementById('explanation').textContent = 
    `‚è∞ H·∫øt th·ªùi gian! ${question.explanation}`;
  document.getElementById('explanation').style.display = 'block';
  
  setTimeout(() => {
    document.getElementById('question-popup').style.display = 'none';
    questionActive = false;
  }, 3000);
}

function selectAnswer(selectedIndex, question) {
  if (questionTimer) {
    clearInterval(questionTimer);
    questionTimer = null;
  }
  
  const buttons = document.querySelectorAll('.answer-btn');
  buttons.forEach(btn => btn.disabled = true);

  const difficultyMultipliers = {
    'easy': 1,
    'medium': 1.5,
    'hard': 2,
    'expert': 3
  };
  
  const multiplier = difficultyMultipliers[currentDifficulty];

  if (selectedIndex === question.correct) {
    buttons[selectedIndex].classList.add('correct');
    
    const timeBonus = Math.floor((questionTimeLeft / question.timeLimit) * 20);
    const healthReward = Math.floor((20 + timeBonus) * multiplier);
    const spiritReward = Math.floor((30 + timeBonus) * multiplier);
    const scoreReward = Math.floor((50 + timeBonus * 2) * multiplier);
    
    player.health = Math.min(100, player.health + healthReward);
    player.spirit = Math.min(100, player.spirit + spiritReward);
    score += scoreReward;
    
    SND.correct();
    
    document.getElementById('explanation').textContent = 
      `‚úÖ Ch√≠nh x√°c! +${healthReward} m√°u, +${spiritReward} tinh th·∫ßn, +${scoreReward} ƒëi·ªÉm. ${question.explanation}`;
  } else {
    buttons[selectedIndex].classList.add('incorrect');
    buttons[question.correct].classList.add('correct');
    
    const healthPenalty = Math.floor(10 * multiplier);
    player.health -= healthPenalty;
    
    SND.incorrect();
    
    document.getElementById('explanation').textContent = 
      `‚ùå Sai r·ªìi! -${healthPenalty} m√°u. ${question.explanation}`;
  }

  document.getElementById('explanation').style.display = 'block';

  setTimeout(() => {
    document.getElementById('question-popup').style.display = 'none';
    questionActive = false;
  }, 4000);
}

function checkGameOver() {
  if (player.health <= 0) {
    gameRunning = false;
    document.getElementById('final-score').textContent = score;
    document.getElementById('final-wave').textContent = wave;
    
    const difficultyNames = {
      'easy': 'D·ªÖ',
      'medium': 'Trung b√¨nh',
      'hard': 'Kh√≥',
      'expert': 'Chuy√™n gia'
    };
    document.getElementById('final-difficulty').textContent = difficultyNames[maxDifficultyReached];
    
    document.getElementById('game-over').style.display = 'flex';
    SND.gameover();
    SND.stopBGM();
  }
}

function restartGame() {
  player = { x: window.innerWidth / 2 - 25, y: window.innerHeight - 100, health: 100, spirit: 100 };
  enemies = [];
  bullets = [];
  enemyBullets = [];
  score = 0;
  wave = 1;
  gameRunning = true;
  questionActive = false;
  currentQuestionIndex = 0;
  currentDifficulty = 'easy';
  maxDifficultyReached = 'easy';
  
  if (questionTimer) {
    clearInterval(questionTimer);
    questionTimer = null;
  }

  const battlefield = document.getElementById('battlefield');
  Array.from(battlefield.children).forEach(child => {
    if (child.id !== 'player') child.remove();
  });

  document.getElementById('game-over').style.display = 'none';
  updatePlayerPosition();
  updateUI();

  if (SND.enabled) SND.startBGM();
}

function gameLoop() {
  if (!gameRunning) { requestAnimationFrame(gameLoop); return; }
  handlePlayerMovement();
  updateEnemies();
  updateBullets();

  if (player.spirit < 100) player.spirit = Math.min(100, player.spirit + 0.3);

  updateUI();
  checkGameOver();
  requestAnimationFrame(gameLoop);
}

window.addEventListener('load', () => { initGame(); });
</script>
</body>
</html>


